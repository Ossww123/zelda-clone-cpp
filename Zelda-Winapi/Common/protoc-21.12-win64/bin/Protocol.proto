syntax = "proto3";
package Protocol;

import "Enum.proto";
import "Struct.proto";

message S_TEST
{
	uint64 id = 1;
	uint32 hp = 2;
	uint32 attack = 3;
	repeated BuffData buffs = 4;
}

message S_EnterGame
{
	bool success = 1;
	uint64 accountId = 2;
}

message S_MyPlayer
{
	ObjectInfo info = 1;
}

message S_AddObject
{
	repeated ObjectInfo objects = 1;
}

message S_RemoveObject
{
	repeated uint64 ids = 1;
}

message C_Move
{
	DIR_TYPE dir = 1;
}

message S_Move
{
	ObjectInfo info = 1;
}

message C_Turn
{
	DIR_TYPE dir = 1;
}

message S_Turn
{
	ObjectInfo info = 1;
}

message C_Attack
{
    DIR_TYPE dir = 1;
    WEAPON_TYPE weaponType = 2;
}

message S_Attack
{
    uint64 attackerId = 1;
    DIR_TYPE dir = 2;
    WEAPON_TYPE weaponType = 3;
}

message S_Damaged
{
    uint64 attackerId = 1;
    uint64 targetId = 2;
    int32 newHp = 3;
    int32 damage = 4;
}

message C_ChangeMap
{
    MAP_ID mapId = 1;
    int32 channel = 2;
}

message S_ChangeMap
{
    bool success = 1;
    MAP_ID mapId = 2;
    int32 channel = 3;
    uint64 instanceId = 4;
}

message S_GainExp
{
    uint64 playerId = 1;
    int32 gainedExp = 2;
    int32 currentExp = 3;
    int32 maxExp = 4;
}

message S_LevelUp
{
    uint64 playerId = 1;
    int32 newLevel = 2;
    int32 maxHp = 3;
    int32 attack = 4;
    int32 defence = 5;
    int32 maxExp = 6;
}

message S_InventoryData
{
    repeated ItemInfo items = 1;
    ItemInfo equippedWeapon = 2;
    ItemInfo equippedArmor = 3;
    ItemInfo equippedPotion = 4;
}

message S_AddItem
{
    int32 itemId = 1;
    int32 slot = 2;
    int32 count = 3;
}

message S_EquipItem
{
    int32 equipType = 1;
    int32 storageSlot = 2;
    int32 storageItemId = 3;
    int32 storageItemCount = 4;
    int32 equipItemId = 5;
    int32 equipItemCount = 6;
    int32 attack = 7;
    int32 defence = 8;
}

message S_UnequipItem
{
    int32 equipType = 1;
    int32 storageSlot = 2;
    int32 attack = 3;
    int32 defence = 4;
}

message S_UseItem
{
    int32 equipType = 1;
    int32 remainCount = 2;
    int32 newHp = 3;
}

message C_EquipItem
{
    int32 slot = 1;
}

message C_UnequipItem
{
    int32 equipType = 1;
}

message C_UseItem
{
    int32 slot = 1;
}

message C_PartyInvite
{
    uint64 targetId = 1;
}

message C_PartyAnswer
{
    uint64 inviterId = 1;
    bool accept = 2;
}

message C_PartyLeave
{
}

message S_PartyInvite
{
    uint64 inviterId = 1;
    string inviterName = 2;
}

message S_PartyUpdate
{
    repeated PartyMemberInfo members = 1;
}

message S_PartyLeave
{
}

message C_Login
{
    string username = 1;
}
